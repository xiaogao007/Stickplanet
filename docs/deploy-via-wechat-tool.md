# 使用微信开发者工具部署云函数（推荐方法）

当 CloudBase CLI 无法识别新创建的环境时，使用微信开发者工具直接部署是最可靠的方法。

## 部署步骤

### 1. 打开微信开发者工具
- 打开你的小程序项目
- 确保已登录并开通云开发

### 2. 切换到正确的云环境
- 点击工具栏上的"云开发"按钮
- 在云开发控制台顶部，确认当前环境为 `cloud1-9gu9ppxt5c82bbc1`
- 如果显示的是其他环境，点击环境下拉菜单切换到正确的环境

### 3. 部署云函数

#### 方法一：逐个部署（推荐，更稳定）

1. 在左侧文件树中，找到 `cloudfunctions` 目录
2. 右键点击要部署的云函数目录（如 `wechatLogin`）
3. 选择 **"上传并部署：云端安装依赖"**
4. 等待部署完成（会显示部署进度）
5. 重复上述步骤部署其他云函数

#### 方法二：批量部署

1. 在左侧文件树中，找到 `cloudfunctions` 目录
2. 右键点击 `cloudfunctions` 目录
3. 选择 **"上传并部署所有文件：云端安装依赖"**
4. 等待所有云函数部署完成

### 4. 需要部署的云函数列表

确保以下云函数都已部署：

- ✅ `wechatLogin` - 微信登录（**必须首先部署**）
- ✅ `getProfile` - 获取用户资料
- ✅ `getUserPlans` - 获取用户计划列表
- ✅ `getTemplates` - 获取推荐计划模板
- ✅ `getPlanById` - 获取计划详情
- ✅ `createPlan` - 创建计划
- ✅ `createCheckIn` - 创建打卡记录
- ✅ `getCheckInsByPlan` - 获取计划的打卡记录
- ✅ `getUserCheckInsForMonth` - 获取用户月度打卡记录
- ✅ `getUserAchievements` - 获取用户成就列表

### 5. 验证部署

部署完成后，可以在云开发控制台中：

1. 进入"云函数"页面
2. 查看已部署的云函数列表
3. 确认所有云函数状态为"正常"
4. 可以点击云函数名称查看详情和日志

## 优势

- ✅ 不需要 CLI 同步环境
- ✅ 直接使用微信开发者工具的环境
- ✅ 部署更稳定可靠
- ✅ 可以实时查看部署进度和日志

## 常见问题

### Q: 部署时提示"环境不存在"
**解决**：确保在云开发控制台中已切换到正确的环境（`cloud1-9gu9ppxt5c82bbc1`）

### Q: 部署失败
**解决**：
1. 检查云函数代码是否有语法错误
2. 查看云开发控制台中的错误日志
3. 确保网络连接正常

### Q: 如何查看部署日志？
**解决**：在云开发控制台的"云函数"页面，点击云函数名称，可以查看调用日志和错误信息

